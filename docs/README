
Hexen II: Hammer of Thyrion 1.4.0
---------------------------------


1. Installation

  1.1 Getting Started
  1.2 Software Requirements
  1.3 Running the Game
  1.4 Sound and Midi
  1.5 Networking/Multiplayer
  1.6 SaveGames and Configuration files
  1.7 Fullscreen/Windowed modes and mouse

2. Known Problems

  2.1 Sound Problems
  2.2 Mods and Crazy Polygons
  2.3 Lines on Screen
  2.4 Fluxbox

3. General Info

  3.1 Mods
  3.2 Tweaks
  3.3 Hardware Acceleration
  3.4 System Stability
  3.5 Other
  3.6 Links
  3.7 Thanks
  3.8 Contact

4. Appendix

----------------------------------------------------------------



1. INSTALLATION
---------------


1.1 Getting Started
-------------------

Hexen II requires game-data files updated to version 1.11 or
higher. There are two ways to do this:

a. Using the installer (easy way):
   The installer will get the files from your original cdroms,
   apply the latest patches (gamedata 1.14) and install the
   binaries for you.

   The second option on the installer will allow you to install
   the Mission Pack "Portal of Praevus", should you have it.
   All you need to do is choosing the Praevus support check-box
   and readying your cdrom.

   Third option on the installer is HexenWorld Multiplayer
   support. No cdrom is necessary for this option.

   Here are the names of the binaries to be installed:

	hexen2	-  Hexen II (software rendering)
	glhexen2 - Hexen II (opengl rendering)
	h2mp	-  Portal of Praevus (software rendering)
	glh2mp	-  Portal of Praevus (opengl rendering)
	hwcl	-  HexenWorld Client (software rendering)
	glhwcl	-  HexenWorld Client (opengl rendering)
	hwsv	-  HexenWorld Server
	hwmaster-  HexenWorld Master Server

b. Manual install/update of datafiles:
   Download the base binary tarball (e.g., hexen2-1.4.0.i586.tgz)
   and extract it. Copy the two files pak0.pak and pak1.pak from
   your cdrom into the "data1" directory in your own installation.
   Run the command " chmod 644 data1/pak* "  to fix their permis-
   sions.  The pak files should be lower-cased, if not already.
   To patch the data files, type " sh update_h2 " (this update
   script and its requirements are included in the binary package).
   Confirm the result by checking with the following md5sums:

   c9675191e75dd25a3b9ed81ee7e05eff  data1/pak0.pak
   c2ac5b0640773eed9ebe1cda2eca2ad0  data1/pak1.pak

   If you have the mission pack (Portal of Praevus), copy the file
   pak3.pak from your cdrom into the "portals" directory in your
   own installation. Run the command " chmod 644 portals/pak* "
   to fix its permissions. No additional patching is necessary
   for the mission pack. Here is the md5sum of pak3.pak, just in
   case:

   77ae298dd0dcd16ab12f4a68067ff2c3  portals/pak3.pak

   If you want to install hexenworld, download the hexenworld
   binary package (e.g., hexenworld-1.4.0.i586.tgz) and extract
   it in the same directory you extracted the base HoT tarball.

   The base tarball includes a file named MD5SUMS.data, so that
   you can check with your final installation.


1.2 Software Requirements
-------------------------

   SDL (min.: 1.2.4)	  : Simple DirectMedia Layer libraries.
			    1.2.7 and newer highly recommended.
			    If run on systems with SDL < 1.2.6,
			    antialiasing support will be auto-
			    matically disabled.

   SDL_mixer (min.: 1.2.4): Required for midi support (should
			    be compiled with timidity+ support)
			    1.2.5 and newer highly recommended.

   ALSA (min.: 0.9.8)	  : Advanced Linux Sound Architecture
			    libraries and kernel modules.
			    Necessary, if you use alsa-sound.
			    1.0.7 (or newer) recommended.

   GLIBC		  : If you compile your own binaries
			    any glibc >= 2.1 should be fine.
			    If you are using our linux binary
			    tarballs, you need glibc >= 2.3.
			    The installer still supports both
			    glibc2.2 >= 2.2.4 and glibc >= 2.3
			    in one single file.
			    As for FreeBSD, version >= 5.3 is
			    required.

   To compile your own binaries, you'll need the following software:

   Make (min.: 3.78)	  : The GNU make command. Versions 3.79.1
			    and newer are recommended.

   GCC (min. 2.95)	  : GNU C Compiler. Version 2.91.66 (aka.
			    egcs-1.1.2) still seems to work, but
			    not tested. Versions 3.2.2 and newer
			    are recommended.

   binutils (min. 2.9.5)  : A GNU collection of binary utilities.
			    Tested with versions 2.11.9x and newer.
			    Recent versions are recommended.

   NASM (min.: 0.98)	  : x86 assembler. 0.98.38 recommended.


1.3 Running the Game:
----------------------

Simplest way of running the game is running the game launcher.
Either choose it from your start menu, or type "hexen2" on the
command line. Choose your options and press "Launch Hexen2".

Old school way of running the game: Go into the installation
directory and run the binary. The default mode is windowed.
Use the "-f" switch to start the game in full-screen mode.

Here are some of the important command-line switches:

 -f | --fullscreen	Run the game fullscreen
 -g | --gllibrary	Select 3D rendering library
 -width   N		Select screen size
 -height  N		Optional, Must be used with -width
 -conwidth  N		Enables a bigger hud display and readable fonts
			at high resolutions. Valid conwidth values are
			values equal or less than the screen width above,
			640 is the sanest.
 -bpp  N		Color depth for GL fullscreen mode
 -nomouse		Disables mouse usage in game
 -heapsize  N		Heapsize (memory to allocate, in KB)
 -fsaa N		Enable N sample antialiasing (N: 0,2,4)
 -sync | -vsync		Enable syncing with monitor refresh (GL, Nvidia)
 -lm_4			Set lightmap format to GL_RGBA, which is actually
			the default format. RGBA lightmaps are required for
			colored lights.
 -lm_1			Set lightmap format to GL_LUMINANCE. (this was the
			old format that hexen2 originally used.)
 -paltex		Enable 8 bit (palettized) textures: saves video
			memory on old low-merory 3D accelerators if the
			proper opengl extension is supported.
 -nomtex		Disable multitexture detection/usage
 -3dfxgamma		Special gamma support for old Voodoo1/2/Rush
 -ossdev		OSS Audio device to use (default: /dev/dsp)
 -sndalsa		Use ALSA for audio
 -alsadev		ALSA Audio device to use (default: hw:0,0 )
 -sndsdl		Use SDL for audio
 -sndspeed N		Sampling rate of sound playback (eg 22050,44100)
 -cddev			CD Audio device to use (default:
				/dev/cdrom for linux, /dev/acd0 for BSD)
 -nocdaudio		Disable cdrom music
 -nomidi		Disable MIDI music
 -listen  N		Enable multiplayer with maximum N players
 -nolan			Disable networking
 -s | --nosound		Run the game without sound
 -v | --version		Display the game version
 -h | --help		Display short help message

If you wish to brighten the display, simply use the game's menu
entry. In the unlikely case that it doesn't work for you, you can
use the "xgamma" utility: Here is the script I use for xgamma:

    cd /usr/local/games/hexen2
    xgamma -q -gamma 1.3;       # brighten the display
    ./glhexen2 -width 800 -height 600 -f -heapsize 48000
	    			# default heapsize is 32768
    xgamma -q -gamma 1;         # restore old brightness

3dfx Voodoo1 and Voodoo2 users can employ the -3dfxgamma commandline
switch to activate native 3dfx gamma controls.


1.4 Sound and Midi
------------------

Hexen II has some great sound effects, with the option of CD or
Midi background music. Unfortunately it didn't originally support
all sound cards. To fix this, it now includes a choice of three
sound drivers:

a. OSS sound code
-----------------
The default sound driver uses OSS (Open Sound System) kernel
modules. It is compatible with most of the Linux distributions but
it is known not to work for some people. If you use the game
launcher, select the OSS option from the sound menu.  If you use
command line, no additional arguments are necessary in order to
activate OSS sound. If OSS doesn't work for you, then please try
the other options below.


b. ALSA sound code
------------------
Second driver is based on the new ALSA (Advanced Linux Sound
Architecture) 1.0.x libraries and can be used with new Linux
distributions such as Mandrake 10.x, Fedora Core 2/3, Debian-
unstable and the like. It works best with higher sampling rates.
If you use the game launcher, select the ALSA option from the
sound menu. If you use command line, then start the game with
"-sndalsa" option. For example:

  ./glhexen2 -sndalsa -sndspeed 44100


c. SDL sound code
-----------------
This third option isolates you from many compatibility issues and
should be usable on most Linux distributions.  If you use the
launcher, select the SDL option from the sound menu.  If you use
command line, then start the game with "-sndsdl" argument.

  ./glhexen2 -sndsdl [other possible arguments]

If you can't get sound working, the "-nosound" option will disable
it. Send a bug report on the project page.


1.4.1 Midi support
------------------

Currently the midi background music works with the OSS and ALSA sound
drivers. It requires 1.2.4 or a newer version of SDL_mixer, preferably
version 1.2.5 or later.

If compiling SDL_mixer yourself, the default location for the timidity
data files (complete set of GUS patches) is "/usr/local/lib/timidity".
If you already have these files installed elsewhere, you will have
to symlink to this directory. For example:

    ln -s /usr/share/timidity /usr/local/lib/timidity

As an alternative, you can edit "SDL_mixer-1.2.x/timidity/config.h"
before compiling SDL_mixer, to point to your timidity data files.


1.5 Networking / Multiplayer
----------------------------

Hammer of Thyrion binaries here WILL NOT play over network with
Raven's Windows Hexen2 binaries. However, the mission pack is
network-compatible across platforms. On the other hand we also
provide Hammer of Thyrion Windows binaries which are fully
compatible with unix versions.

This has nothing to do with us: Raven's latest Hexen2 version
is 1.11, and they didn't give us original 1.11 or older sources.
The network code had changes during the 1.11-1.12 transition and
we only have the 1.12 sources.

    Deathmatch, TeamPlay, etc:
	- HexenWorld is highly recommended at both sides.

    Cooperative games:
	- Linux side  : (gl)hexen2 or (gl)h2mp,

	- Windows side: * (gl)h2mp (original CD version), or
			* Hammer of Thyrion Windows versions, or
			* jshexen2,  or
			* Pa3pyX's Hexen2 1.14-1.15

	should work just fine with each other.


Here is a network-compatibility table:

==============================================================
Binary		Windows		Linux	  Game		Status
==========	===========	========  ==========	======

(gl)hexen2	<= 1.11		>= 1.12	  Hexen II	FAILS
		>= 1.12 (*)	>= 1.12	  Hexen II	Runs
==========	===========	========  ==========	======

(gl)h2mp	>= 1.12		>= 1.12	  Hexen II	Runs
					  Miss. Pack	Runs
==========	===========	========  ==========	======

*) Recompiles/ports of the source such as the ones from Pa3Pyx
   or Hammer of Thyrion, jshexen2, newhexen and such.
==============================================================


1.6 SaveGames and Configuration files
-------------------------------------

Your savegames and configuration files are stored in a folder
named  .hexen2 in your home folder:  ~/.hexen2   For the demo
version, it's ~/.hexen2demo instead.

Saves/configs for Hexen2 are stored directly under ~/.hexen2/
For the Mission Pack, they are stored under ~/.hexen2/portals/


1.7 Fullscreen/Windowed modes and mouse
---------------------------------------

While playing the game, you can switch between fullscreen and
windowed modes by pressing ALT + Enter combination. Alternatively,
you can use the relevant menu option.

The menu option "Use Mouse" enables/disables mouse usage on the
fly. While in windowed mode, disabling the mouse ungrabs the mouse
pointer, so that you can easily use your desktop. You can also
un-grab/re-grab the mouse pointer by pressing the  CTRL + G  key
combination whenever you want.

----------------------------------------------------------------



2. KNOWN PROBLEMS
-----------------


2.1 Sound Problems
------------------

First, we recommend using high sampling rates. This can be done either
by a commandline argument like "-sndspeed 44100" or "-sndspeed 48000",
or by using the game launcher. SDL and ALSA are the drivers of choice.

If you have problems making sound to work correctly, using the arts
sound server may help you:    artsd & ; artsdsp -m glhexen2 -sndoss
You may notice some lag in sound but if all fails this may be a good
enough workaround.

We have reports that some i8x0 sound chips not working correctly with
hexen2, and this is overcome either by using alsa driver of hexen2 at
48000 sampling rate, or by the arts workaround mentioned above.

If none of the three sound drivers work and you're using the older
linux 2.4 kernel and built-in sound modules, you may try swapping to
the ALSA kernel sound modules. This is not simple process, with good
documentation scarce, but once they are installed and configured, you
can do (for example, on Mandrake):

    rmmod emu10k1          ;# remove OSS sound module for SBLive
    /etc/init.d/alsa start ;# start ALSA sound modules

Make SURE oss-emulation is enabled: lsmod should list snd-pcm-oss.
Check with alsamixer that the volumes are not turned down to zero.
With ALSA + OSS Emulation, oss-sound in hexen2 should work fine.
On new linux distributions, alsa-0.9.8 or better is already included.
Users of old distributions can visit ALSA site for alsa-sound support.


2.2 Mods and Crazy Polygons
---------------------------

Some mission-packs/mods for Quake based games can cause existing
player and monster models to be drawn with lines all over the
place.  To fix this, delete the directory  ~/.hexen2/glhexen
and/or  ~/.hexen2/portals/glhexen.  When you next run the game,
it will remake this directory and everything should be fine.
HoT-1.3.0 and later have fixed this bug, but pre-existing mesh
files in those mentioned directories shall still cause this bad
view, so delete them.  Mods installed after HoT-1.3.0 shall be
fine.


2.3 Lines on Screen
-------------------

A common problem, especially with 3dfx cards, is flickering lines
across the screen caused by a GL tweak. To fix this, bring down
the console with the '~' key and enter 'gl_ztrick 0'.
With fresh installations of HoT-1.2.3 and later, this option is
disabled by default.


2.4 Fluxbox
-----------

Though it's a great window manager, fluxbox has issues with some
games in fullscreen mode. If this is the case, hit "ALT + Enter"
twice to switch into windowed mode and then back into fullscreen
mode.

----------------------------------------------------------------


3. GENERAL INFO
---------------


3.1 Mods
--------

One of the few large mods for Hexen II is The Fortress of Four
Doors. It has a confusing level near the middle, but is otherwise
great - look around the web for the file "fo4d.zip".

Also, make sure to check out the botmatch mod "hcbots" available
at our project page.


3.2 Tweaks
----------

Quake games are very friendly to tweakers. The best performance
gain I have found is by increasing the value  "_snd_mixahead".
For users with slow video cards, changing the gl_ variables may
speed up your system. Here are just a few of those that can be
changed. For more info see various Quake tweaking sites.

variable	values
--------	------
_snd_mixahead	0.1 - 0.9 : 0.1 = less latency,
			    0.9 = better performance

gl_multitexture	0|1	  : Disable/Enable multitexturing on
			    the fly. 0 is default.

gl_purge_maptex	0|1	  : Purge opengl textures upon map
			    change. Saves a lot of video memory
			    because the textures won't keep
			    accumulating from map to map

gl_stencilshadow  0|1	  : Disable/Enable stencil buffered shadows
			    on the fly. 0 is default.

gl_ztrick	0|1	  : 3% performance tweak
			    (some cards unsupported)

gl_picmip	0|1|2	  : 0 is default. 1 and 2 scale down
			    the textures (low quality), but
			    the help screens and some small
			    fonts become unreadable and ugly.

gl_playermip	0|1|2

gl_texturemode	gl_nearest	(least quality, best speed)
		gl_nearest_mipmap_nearest :	    ^
		gl_linear_mipmap_nearest  :
		gl_linear_mipmap_linear   :	    v
				(best quality, least speed)

snow_active	0 - 255	 : 0 =  none,
			   1 =  normal (amount designated by
				the map), and higher acts as
				a multiplier


3.2.1 Nvidia tweaks
-------------------

These are only valid for supported hardware (Geforce and better)
with Nvidia's proprietry video drivers installed.

The -sync or -vsync command line switch forces GL redraws to sync
with the monitor refresh for a more stable image. This is equivalent
to setting the environment variable __GL_SYNC_TO_VBLANK to 1.

You can also override our -fsaa switch if you set Nvidia specific
environment variable __GL_FSAA_MODE to an appropriate value.  The
details for this can usually be found in Nvidia's readme file
(/usr/share/doc/NVIDIA_GLX-1.0/README).  Briefly: Geforce 1 and 2
use mode 3 or 4, others 1, 2, 4 or 5.


3.3 Hardware Acceleration
-------------------------

Setting up hardware OpenGL acceleration under Linux used to be
a big deal in the past. Modern distros do this automatically
now.

Nvidia's drivers for all of their modern video cards are not
open source, and because of this many distributions do not
include them. If your Nvidia card is running slowly, this is
probably the cause, you should visit Nvidia.com to download the
linux installer. In my experience these drivers are great, but
not all versions work 100% with all cards. If you have a
misbehaving Nvidia video card, try a different (older) driver.

Linux kernel 2.6.8 / Nvidia driver version 6111 /TnT card and
possibly other cards and kernels have issues with the GL game.
Upgrade to NVIDIA-Linux-x86-1.0-7167 to fix these problems.
If you don't want to change your nvidia driver and the game seems
to halt, try using the alt-enter key combination to switch to
windowed mode and redraw the screen. This behaviour is the same
for glquake.

3dfx Voodoo1, Voodoo2 and Voodoo Rush are no longer hardware
accelerated under recent XFree-4.0 releases.  You need Glide,
and Mesa compiled against Glide. For some more detailed info,
consult the document README.3dfx.


3.4 System Stability
--------------------

3D games are probably the most intensive workout you can give
your PC. Problems with them are not always easy to track down.
I recently had some trouble with glquake which I eventually 
racked down to Mandrake's XFree86-4.3 packages - probably due
to compiler pentium optimizations. I switched to XFree86-4.3
(from Redhat-9.0) and quake now is rock solid.

I've also had crashes in 3D games associated with

  * Hard drives overheating, seizing system.
  * Bios ram settings being too aggressive, crashing game.
  * Cpu overclocked / overheating with unpredictable results.


3.5 Other
---------

"Thyrion is the world Hexen II takes place in.  An anvil is used
by blacksmiths to create weapons and tools.  I stole the anvil
paradigm from AoT's distant cousin, QuakeForge.

"Raven didn't give us Hexen 2 source, they gave us Portal of
Praevus source. PoP is a few levels short of being an entirely
different game....  I think once I nail a few simple physics
bugs, we'll have PoP emulating Hexen 2 quite nicely, but it's
been suggested that I'll need a whole different physics engine."

- Dan Olson


3.6 Links
---------

Hammer of Thyrion  :  http://sourceforge.net/projects/uhexen2
Anvil of Thyrion   :  http://aot.linuxgames.com/
Pa3Pyx source-port :  http://pa3pyx.dnsalias.org/
JSHexen2 port      :  http://jurajstyk.host.sk/
Hexen II FAQ       :  http://www.raven-games.com/hex2faq/
Linux GlQuake      :  http://mfcn.ilo.de/glxquake
ALSA sound         :  http://www.alsa-project.org
Lowercase Utility  :  http://filerenameutils.sourceforge.net


3.7 Thanks
----------

Thanks to ID Software, Raven Games and Activision for a great
game and for supporting open source software. Also thanks to
Dan Olson and Clément Bourdarias for the initial Linux port
(AoT) and to Sourceforge.net for hosting HoT.
Mega thanks to all the unheralded Doom/Quake/Hexen modders.


3.8 Contact
-----------

Ozkan Sezer      <sezero@users.sourceforge.net>
Steven Atkinson  <stevenaaus@users.sourceforge.net>



---------------------------------
APPENDIX  A.  Some Legacy Options
---------------------------------

If, while running around, the screen occasionally twitches up
and down, then you must disable lookspring by using the game
console or by editing your config.cfg file.

lookspring, lookstrafe and keyboard look (+klook) are legacy
options for systems without a mouse which we actually didn't
kill for historical reasons. They are pretty much of no use
today. If you somehow accidentally enabled them, you most
probably will need to disable them.

These options and key bindings are removed from the menu system
as of Hammer of Thyrion 1.3.0.  For reference, here are what
they are meant to do, as written in the old manuals:

  lookspring:	0 or 1. Returns your view immediately to straight
		ahead when you release the look up / down key.
		Otherwise, you must move forward for a step or
		two before your view snaps back.
  lookstrafe:	0 or 1. If you are using the look up / down key,
		then this option causes you to sidestep instead
		of turn when you try to move left or right.
  keyboard look: If +klook is bound to a key, press that key to
		use your movement keys to look up or down.
  mouse look:	If +mlook is bound to a key, press that key to
		allow your mouse to look up or down (by sliding
		it forward and back), and to remain looking up
		or down even if you move forward.

